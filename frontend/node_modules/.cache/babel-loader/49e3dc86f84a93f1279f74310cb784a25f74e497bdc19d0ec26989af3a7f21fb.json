{"ast":null,"code":"import axios from 'axios';\nconst API_BASE = process.env.REACT_APP_API_URL || '/api';\nconst api = axios.create({\n  baseURL: API_BASE,\n  timeout: 60000 // increased to 60 seconds\n});\n\n// Auto-retry logic (retries up to 3 times on timeout/network error)\nconst retry = async (fn, retries = 3, delay = 1000) => {\n  try {\n    return await fn();\n  } catch (err) {\n    var _err$response;\n    if (retries === 0) throw err;\n    const isRetryable = !err.response || err.code === 'ECONNABORTED' || ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) >= 500;\n    if (!isRetryable) throw err;\n    await new Promise(res => setTimeout(res, delay));\n    return retry(fn, retries - 1, delay * 1.5);\n  }\n};\n\n// Response interceptor\napi.interceptors.response.use(res => res.data, err => {\n  var _err$response2, _err$response2$data;\n  const message = err.code === 'ECONNABORTED' ? 'Request timed out — MongoDB Atlas may be slow. Retrying...' : ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || err.message || 'API Error';\n  return Promise.reject(new Error(message));\n});\nexport const machineService = {\n  getAll: (params = {}) => retry(() => api.get('/machines', {\n    params\n  })),\n  getById: id => retry(() => api.get(`/machines/${id}`)),\n  getSummary: () => retry(() => api.get('/machines/status/summary')),\n  getTrends: (params = {}) => retry(() => api.get('/machines/analytics/trends', {\n    params\n  }))\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE","process","env","REACT_APP_API_URL","api","create","baseURL","timeout","retry","fn","retries","delay","err","_err$response","isRetryable","response","code","status","Promise","res","setTimeout","interceptors","use","data","_err$response2","_err$response2$data","message","error","reject","Error","machineService","getAll","params","get","getById","id","getSummary","getTrends"],"sources":["D:/My Projectss/industrial-dashboard/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE = process.env.REACT_APP_API_URL || '/api';\n\nconst api = axios.create({\n  baseURL: API_BASE,\n  timeout: 60000, // increased to 60 seconds\n});\n\n// Auto-retry logic (retries up to 3 times on timeout/network error)\nconst retry = async (fn, retries = 3, delay = 1000) => {\n  try {\n    return await fn();\n  } catch (err) {\n    if (retries === 0) throw err;\n    const isRetryable = !err.response || err.code === 'ECONNABORTED' || err.response?.status >= 500;\n    if (!isRetryable) throw err;\n    await new Promise(res => setTimeout(res, delay));\n    return retry(fn, retries - 1, delay * 1.5);\n  }\n};\n\n// Response interceptor\napi.interceptors.response.use(\n  (res) => res.data,\n  (err) => {\n    const message = err.code === 'ECONNABORTED'\n      ? 'Request timed out — MongoDB Atlas may be slow. Retrying...'\n      : err.response?.data?.error || err.message || 'API Error';\n    return Promise.reject(new Error(message));\n  }\n);\n\nexport const machineService = {\n  getAll:     (params = {}) => retry(() => api.get('/machines', { params })),\n  getById:    (id)          => retry(() => api.get(`/machines/${id}`)),\n  getSummary: ()            => retry(() => api.get('/machines/status/summary')),\n  getTrends:  (params = {}) => retry(() => api.get('/machines/analytics/trends', { params })),\n};\n\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,MAAM;AAExD,MAAMC,GAAG,GAAGL,KAAK,CAACM,MAAM,CAAC;EACvBC,OAAO,EAAEN,QAAQ;EACjBO,OAAO,EAAE,KAAK,CAAE;AAClB,CAAC,CAAC;;AAEF;AACA,MAAMC,KAAK,GAAG,MAAAA,CAAOC,EAAE,EAAEC,OAAO,GAAG,CAAC,EAAEC,KAAK,GAAG,IAAI,KAAK;EACrD,IAAI;IACF,OAAO,MAAMF,EAAE,CAAC,CAAC;EACnB,CAAC,CAAC,OAAOG,GAAG,EAAE;IAAA,IAAAC,aAAA;IACZ,IAAIH,OAAO,KAAK,CAAC,EAAE,MAAME,GAAG;IAC5B,MAAME,WAAW,GAAG,CAACF,GAAG,CAACG,QAAQ,IAAIH,GAAG,CAACI,IAAI,KAAK,cAAc,IAAI,EAAAH,aAAA,GAAAD,GAAG,CAACG,QAAQ,cAAAF,aAAA,uBAAZA,aAAA,CAAcI,MAAM,KAAI,GAAG;IAC/F,IAAI,CAACH,WAAW,EAAE,MAAMF,GAAG;IAC3B,MAAM,IAAIM,OAAO,CAACC,GAAG,IAAIC,UAAU,CAACD,GAAG,EAAER,KAAK,CAAC,CAAC;IAChD,OAAOH,KAAK,CAACC,EAAE,EAAEC,OAAO,GAAG,CAAC,EAAEC,KAAK,GAAG,GAAG,CAAC;EAC5C;AACF,CAAC;;AAED;AACAP,GAAG,CAACiB,YAAY,CAACN,QAAQ,CAACO,GAAG,CAC1BH,GAAG,IAAKA,GAAG,CAACI,IAAI,EAChBX,GAAG,IAAK;EAAA,IAAAY,cAAA,EAAAC,mBAAA;EACP,MAAMC,OAAO,GAAGd,GAAG,CAACI,IAAI,KAAK,cAAc,GACvC,4DAA4D,GAC5D,EAAAQ,cAAA,GAAAZ,GAAG,CAACG,QAAQ,cAAAS,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcD,IAAI,cAAAE,mBAAA,uBAAlBA,mBAAA,CAAoBE,KAAK,KAAIf,GAAG,CAACc,OAAO,IAAI,WAAW;EAC3D,OAAOR,OAAO,CAACU,MAAM,CAAC,IAAIC,KAAK,CAACH,OAAO,CAAC,CAAC;AAC3C,CACF,CAAC;AAED,OAAO,MAAMI,cAAc,GAAG;EAC5BC,MAAM,EAAMA,CAACC,MAAM,GAAG,CAAC,CAAC,KAAKxB,KAAK,CAAC,MAAMJ,GAAG,CAAC6B,GAAG,CAAC,WAAW,EAAE;IAAED;EAAO,CAAC,CAAC,CAAC;EAC1EE,OAAO,EAAMC,EAAE,IAAc3B,KAAK,CAAC,MAAMJ,GAAG,CAAC6B,GAAG,CAAC,aAAaE,EAAE,EAAE,CAAC,CAAC;EACpEC,UAAU,EAAEA,CAAA,KAAiB5B,KAAK,CAAC,MAAMJ,GAAG,CAAC6B,GAAG,CAAC,0BAA0B,CAAC,CAAC;EAC7EI,SAAS,EAAGA,CAACL,MAAM,GAAG,CAAC,CAAC,KAAKxB,KAAK,CAAC,MAAMJ,GAAG,CAAC6B,GAAG,CAAC,4BAA4B,EAAE;IAAED;EAAO,CAAC,CAAC;AAC5F,CAAC;AAED,eAAe5B,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}